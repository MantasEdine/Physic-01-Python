import math

def calculate_max_distance_and_height(h):
    """
    Вычисляет высоту отверстия и максимальное расстояние полёта струи из цилиндрического сосуда.

    :param h: высота сосуда (в метрах)
    :return: высота отверстия (в метрах) и максимальное расстояние (в метрах)
    """
    g = 9.81  # ускорение свободного падения, м/с^2

    # Оптимальная высота отверстия
    h_optimal = h / 2

    # Максимальное расстояние
    d_max = math.sqrt(h_optimal * (h - h_optimal) * 4 * h)

    return h_optimal, d_max

def reynolds_ratio(a, delta_x):
    """
    Вычисляет отношение чисел Рейнольдса в сечениях, отстоящих друг от друга на delta_x.

    :param a: коэффициент экспоненциального уменьшения радиуса, м⁻¹
    :param delta_x: расстояние между сечениями, м
    :return: отношение чисел Рейнольдса
    """
    r1 = math.exp(-a * 0)
    r2 = math.exp(-a * delta_x)

    ratio = (r1 / r2) ** 4

    return ratio

def relativistic_velocity(v_y_prime, v):
    """
    Вычисляет скорость частицы в системе отсчёта K с использованием релятивистского сложения скоростей.

    :param v_y_prime: скорость частицы вдоль оси y в системе K', в долях скорости света
    :param v: скорость системы K' относительно K, в долях скорости света
    :return: скорость частицы в системе K (модуль)
    """
    c = 3e8  # скорость света, м/с
    gamma = 1 / math.sqrt(1 - v**2)  # Лоренц-фактор

    # Релятивистское преобразование скорости вдоль оси y
    v_y = v_y_prime / (gamma * (1 + 0))  # v_x' = 0, поэтому знаменатель упрощается

    return v_y * c

def energy_per_unit_mass(v):
    """
    Вычисляет энергию (на единицу массы), необходимую для сообщения телу заданной скорости.

    :param v: скорость тела в долях скорости света
    :return: энергия на единицу массы (Дж/кг)
    """
    c = 3e8  # скорость света, м/с
    gamma = 1 / math.sqrt(1 - v**2)  # Лоренц-фактор
    energy = (gamma - 1) * c**2
    return energy

# Данные задачи
h_cm = 50  # Высота сосуда в см
h = h_cm / 100  # Перевод в метры

# Расчёт оптимальной высоты и максимального расстояния
h_optimal, d_max = calculate_max_distance_and_height(h)

print(f"Оптимальная высота отверстия: {h_optimal:.2f} м")
print(f"Максимальное расстояние струи: {d_max:.2f} м")

# Данные для чисел Рейнольдса
a = 0.50  # Коэффициент уменьшения радиуса, м⁻¹
delta_x = 3.2  # Расстояние между сечениями, м

re_ratio = reynolds_ratio(a, delta_x)

print(f"Отношение чисел Рейнольдса: {re_ratio:.2f}")

# Данные для релятивистского сложения скоростей
v_y_prime = 0.5  # проекция скорости частицы вдоль оси y в системе K', в долях c
v = 0.75  # скорость системы K' относительно K, в долях c

v_y_k = relativistic_velocity(v_y_prime, v)

print(f"Скорость частицы в системе K: {v_y_k:.2f} м/с")

# Данные для вычисления энергии
v_ship = 0.980  # скорость корабля в долях скорости света
energy_needed = energy_per_unit_mass(v_ship)

print(f"Энергия, необходимая для сообщения скорости 0.980c: {energy_needed:.2e} Дж/кг")
